<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Photo</title>
  <style>
    .demo-image__lazy {
      overflow-y: auto;
      display: flex;
      flex-wrap: wrap;
    }
    .demo-image__lazy img {
      display: block;
      margin: 1%;
      width: 23%;
      height: fit-content;
    }
    .demo-image__lazy .el-image:last-child {
      margin-bottom: 0;
    }
    .big_bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(213, 213, 213, 0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      display: none;
    }
    .big_bg img {
      max-width: 95%;
      max-height: 95%;
    }
  </style>
</head>
<body>
  <div>
    <div class="demo-image__lazy img_div"></div>
    <div class="big_bg" onclick="closeImg()"></div>
  </div>
</body>

<script>
  var imgs = [
    "000DB-1126jsa27593-201-1.jpg",
    "000DB-1126jsa27593-068-1-.jpg",
    "000DB-1126jsa27593-174-1.jpg",
    "1126jsa27593-001.jpg",
    "1126jsa27593-002.jpg",
    "1126jsa27593-007.jpg",
    "1126jsa27593-008.jpg",
    "1126jsa27593-013.jpg",
    "1126jsa27593-018.jpg",
    "1126jsa27593-019.jpg",
    "1126jsa27593-026.jpg",
    "1126jsa27593-041.jpg",
    "1126jsa27593-051.jpg",
    "1126jsa27593-057.jpg",
    "1126jsa27593-080.jpg",
    "1126jsa27593-081.jpg",
    "1126jsa27593-084.jpg",
    "1126jsa27593-086.jpg",
    "1126jsa27593-089.jpg",
    "1126jsa27593-091.jpg",
    "1126jsa27593-107.jpg",
    "1126jsa27593-111.jpg",
    "1126jsa27593-112.jpg",
    "1126jsa27593-114.jpg",
    "1126jsa27593-117.jpg",
    "1126jsa27593-119.jpg",
    "1126jsa27593-120.jpg",
    "1126jsa27593-123.jpg",
    "1126jsa27593-125.jpg",
    "1126jsa27593-126.jpg",
    "1126jsa27593-134.jpg",
    "1126jsa27593-135.jpg",
    "1126jsa27593-139.jpg",
    "1126jsa27593-142.jpg",
    "1126jsa27593-144.jpg",
    "1126jsa27593-153.jpg",
    "1126jsa27593-154.jpg",
    "1126jsa27593-170.jpg",
    "1126jsa27593-171.jpg",
    "1126jsa27593-183.jpg",
    "1126jsa27593-186.jpg",
    "1126jsa27593-188.jpg",
    "1126jsa27593-191.jpg",
    "1126jsa27593-192.jpg",
    "1126jsa27593-205.jpg",
    "1126jsa27593-209.jpg",
    "1126jsa27593-215.jpg",
    "1126jsa27593-216.jpg",
    "1126jsa27593-217.jpg",
    "1126jsa27593-219.jpg"
  ]
  var i = 0
  function showImg() {
    if (!imgs[i]) return
    var img = new Image()
    img.src = `./imgs/${imgs[i]}`
    img.onload = function () {
      appendHtml(document.getElementsByClassName('img_div')[0], `<img src="./imgs/${imgs[i]}" onclick="openImg('${imgs[i]}')">`)
      i++
      showImg()
    }
  }
  showImg(0)
  function appendHtml(elem,value){
    var node = document.createElement("div"),
        fragment = document.createDocumentFragment(),
        childs = null,
        i = 0;
    node.innerHTML = value;
    childs = node.childNodes;
    for( ; i < childs.length; i++){
        fragment.appendChild(childs[i]);
    }
    elem.appendChild(fragment);
    childs = null;
    fragment = null;
    node = null;
  }
  // let html = ''
  // imgs.forEach((item) => {
  //   html += `<img data-src="./imgs/${item}" src="./imgs/sun.jpeg" onclick="openImg('${item.toString()}')">`
  // })
  // document.getElementsByClassName('img_div')[0].innerHTML = html


  
  // //获取全部img标签
  // var images = document.getElementsByTagName("img");
  // window.addEventListener("scroll", (e) => {
  //   //当发生滚动事件时调用ergodic事件
  //   ergodic();
  // });
  // function ergodic() {
  //   // 遍历每一张图
  //   for (let i of images) {
  //     //判断当前图片是否在可视区内
  //     if (i.offsetTop <= window.innerHeight + window.scrollY) {
  //         //获取自定义data-src属性的值
  //         let trueSrc = i.getAttribute("data-src");
  //         //把值赋值给图片的src属性
  //         i.setAttribute("src", trueSrc);
  //     }
  //   }
  // }
  // //没发生滚动事件时也要先执行一次
  // ergodic();

  // let html = ''
  // imgs.forEach((item) => {
  //   html += `<img src="./imgs/${item}" onclick="openImg('${item.toString()}')">`
  // })
  // document.getElementsByClassName('img_div')[0].innerHTML = html

  function openImg (img) {
    document.getElementsByClassName('big_bg')[0].style.display = 'flex'
    document.getElementsByClassName('big_bg')[0].innerHTML = `<img src="./imgs/${img}">`
  }
  function closeImg() {
    document.getElementsByClassName('big_bg')[0].style.display = 'none'
  }
</script>
</html>